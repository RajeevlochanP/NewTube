<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <video id="video" controls width="640"></video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const video = document.getElementById('video');
    const source = 'http://localhost:3000/stream/masterManifest/68904a5da098220b47e8ae01';

    if (Hls.isSupported()) {
      const hls = new Hls();

      hls.loadSource(source);
      hls.attachMedia(video);

      // Proper event to wait for manifest to be parsed
      hls.on(Hls.Events.MANIFEST_PARSED, function () {
        // hls.currentLevel=3;
        console.log(hls.currentLevel);
        console.log("Available quality levels:", hls.levels);
        // Example: print resolution options
        hls.levels.forEach((level, index) => {
          console.log(`Level ${index}: ${level.width}x${level.height} @ ${level.bitrate}bps`);
        });
      });
      hls.on(Hls.Events.LEVEL_SWITCHED, function (event, data) {
        console.log(hls.autoLevelEnabled);
        console.log("Switched to level:", data.level);
      });

    }
  </script>

</body>

</html>